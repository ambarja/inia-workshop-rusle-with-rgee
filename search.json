[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mapeo de Erosión del Suelo empleando la Metodología de RUSLE con rgee📚🏞️🌱🌧️🚜🔎📉💨🌾🗺️",
    "section": "",
    "text": "!Bienvenid@s! 👋\n\nEste manual lleva por título “Mapeo de Erosión del Suelo a Nivel Nacional empleando la Metodología RUSLE y rgee”. El objetivo, de esta guía dar a conocer a los usuarios y nuevos usuarios un flujo de trabajo reproducible y replicable para cualquier área de estudio que desea estimar y analizar los patrones espaciales y temporales de la erosión de suelo.\nBajo el conexto de la ciencia datos y el apogeo de la mineria de datos (big data o data mining), esta guía dará a conocer el fácil acceso y procesamientos automatico de datos geográficos (geocomputación o geografía computacional) que permitan su manipulación para el cálculo de la erosión del suelo sin tener la necesidad de contar con elevadas capacidades computacionales.\nFinalmente, para poder reproducir y replicar satisfactoriamente este manual se debe tener cierto acercamiento a cualquier lenguaje de programación orientado a objetos (R,python, JavaScript, etc), asimismo se dará ciertas requerimientos que deberá presentar tu laptop o pc para la instalación de software con el fin de cumplir los objetivos mostrados inicialmente, es necesario recalcar que todo los procesos que se darán a conocer en los próximos cápitulos serán desarrollado sólo bajo el lenguaje de programación de R."
  },
  {
    "objectID": "01_requeriments.html#qué-es-r",
    "href": "01_requeriments.html#qué-es-r",
    "title": "1  Aspectos generales e instalación de software",
    "section": "1.1 ¿Qué es R?",
    "text": "1.1 ¿Qué es R?\nEs un lenguaje de programación interpretado de código abierto multi-plataforma que permite hacer diferentes tipos de análisis estadísticos, desde importar datos, ordenarlos, modelar y visualizar mediante gráficos de alta calidad, e incluir en informes académicos de manera científica (Hadley Wickham y Garrett Grolemund,2017 ).\n\nCaracterísticas:\n\nEs un software libre y de código abierto.\nCorre en multiples sistemas operativos (GNU/Linux, MacOSX y Windows).\nPosee una variedad de paquetes para temás específicos.\nComunidad científica muy dinámica."
  },
  {
    "objectID": "01_requeriments.html#qué-es-rtools",
    "href": "01_requeriments.html#qué-es-rtools",
    "title": "1  Aspectos generales e instalación de software",
    "section": "1.2 ¿Qué es Rtools?",
    "text": "1.2 ¿Qué es Rtools?\nEs una colección de herramientas necesarias en R para compilar y construir paquetes desde el código fuente en solo los sistemas operativos de Windows, si no se tiene instalado, no se podrían instalar ni utilizar muchos paquetes que requieren está compilación basadas en C o C++."
  },
  {
    "objectID": "01_requeriments.html#qué-es-rstudio",
    "href": "01_requeriments.html#qué-es-rstudio",
    "title": "1  Aspectos generales e instalación de software",
    "section": "1.3 ¿Qué es Rstudio?",
    "text": "1.3 ¿Qué es Rstudio?\nEs un entorno de desarrollo integrado (IDE) para R. Incluye una consola, un editor de código, una consola, un gestor para la administración del espacio de trabajo, entre otros.\nCONCLUSIÓN: “RSTUDIO ES EL ROSTRO BONITO DE R”"
  },
  {
    "objectID": "01_requeriments.html#instalación-de-r-rtools-y-rstudio",
    "href": "01_requeriments.html#instalación-de-r-rtools-y-rstudio",
    "title": "1  Aspectos generales e instalación de software",
    "section": "1.4 Instalación de R, Rtools y Rstudio",
    "text": "1.4 Instalación de R, Rtools y Rstudio"
  },
  {
    "objectID": "01_requeriments.html#cuál-es-el-concepto-de-un-paquete-en-r",
    "href": "01_requeriments.html#cuál-es-el-concepto-de-un-paquete-en-r",
    "title": "1  Aspectos generales e instalación de software",
    "section": "1.5 ¿Cuál es el concepto de un paquete en R?",
    "text": "1.5 ¿Cuál es el concepto de un paquete en R?\nUn paquete en R es una colección organizada de funciones, datos y documentación que se agrupa para resolver un conjunto particular de problemas (Hadley Wickham, 2021).\nEstos son los paquetes que se utilizará durante todo flujo de trabajo 👇\n\n\n\n\n\n  \n    {tidyverse}\n    \n    Paquete que te permite hacer ciencia de datos.\n    Más información,clic aquí\n  \n\n\n\n\n  \n    {tidyterra}\n    \n    Paquete que te permite manipular datos raster.\n    Más información,clic aquí\n  \n\n\n\n\n  \n    {cloudml}\n    \n    Paquete que te permite instalar y utilizar GCloud CLI.\n    Más información,clic aquí\n  \n\n\n\n\n  \n    {rgee}\n    \n    Paquete que integrar Google Earth Engine con R.\n    Más información,clic aquí"
  },
  {
    "objectID": "01_requeriments.html#instalación-de-paquetes-en-r",
    "href": "01_requeriments.html#instalación-de-paquetes-en-r",
    "title": "1  Aspectos generales e instalación de software",
    "section": "1.6 Instalación de paquetes en R",
    "text": "1.6 Instalación de paquetes en R\nUna vez instalada los software de R y Rstudio procederemos a instalar y configurar todos los paquetes mencionados en la sección de requerimientos.\nEste proceso solo se realizar una única vez, cuando ya tienes instalado y configurado todos los paquetes solo es necesario activarlos en tu sistema.\n\n# Lista de paquetes a instalar\npkgs &lt;- c(\"tidyverse\", \"tidyterra\",\"remotes\",\"cloudml\", \"sf\", \"cptcity\")\n# install.packages(pkgs = pkgs, dependencies = TRUE)\n# Se recomienda instalar la versión de GitHub de rgee\n\nPara verificar que todo los paquetes fuerón instalados, corremos el siguiente script:\n\n# Verificar la instalación de los paquetes\nfor (pkg in pkgs) {\n  if (!requireNamespace(pkg, quietly = TRUE)) {\n    message(paste(\"El paquete\", pkg, \"no está instalado.\"))\n  } else {\n    message(paste(\"El paquete\", pkg, \"está instalado y cargado correctamente.\"))\n  }\n}\n\nEl paquete tidyverse está instalado y cargado correctamente.\nEl paquete tidyterra está instalado y cargado correctamente.\nEl paquete remotes está instalado y cargado correctamente.\nEl paquete cloudml está instalado y cargado correctamente.\nEl paquete sf está instalado y cargado correctamente.\nEl paquete cptcity está instalado y cargado correctamente.\nEl paquete de rgee actualmente presenta algunos incovenientes con la versión de CRAN, especialmente para los sistemas operativos de Windows, se recomienda instalar la versión de desarrollo la cual está alojada en GitHub. Para su correcta instalación se recomienda seguir cualquiera de las siguientes alternativas mostradas 👇\n\n\n\n\nForma explítica\n\n\nForma implítica\n\n\n\n\nlibrary(remotes)\ninstall_github('r-spatial/rgee')\n\n\n# install.packages('remotes')\nremotes::install_github('r-spatial/rgee')\n\n\n\n\n\nremotes::install_github(\"r-earthengine/rgeeExtra\")\n\nSkipping install of 'rgeeExtra' from a github remote, the SHA1 (79fde841) has not changed since last install.\n  Use `force = TRUE` to force installation"
  },
  {
    "objectID": "02_rgee-setup.html#registro-de-gmail",
    "href": "02_rgee-setup.html#registro-de-gmail",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.1 Registro de GMAIL",
    "text": "2.1 Registro de GMAIL\nPara poder acceder a todos los beneficios que nos ofrece la plataforma de Earth Engine es necesario contar con una cuenta de GMAIL activo.\nPara registrarnos nos dirigimos a 👉 : https://code.earthengine.google.com/register\n\nEarth Engine te ofrece dos alternativas para poder registrarte:\n\nUsuario comercial: Desarrollo de productos comerciales,monetization de servicos, etc.\nUsurio no comercial: Investigación, docencia, etc.\n\nPara nuestro interés procedemos a elegir la segunda opción.\n\nEste nos llevará a una nueva penstaña en donde nos solicitará llenar nuestros datos personales y algunas preguntas adicionales como la afiliación y cuales son las intenciones de usar Earth Engine.\n\nFinalizado el registro Earth Engine, solo nos queda esperar el correo de confirmación para poder acceder sin ninguna restricción a la plataforma. Es necesario tener en cuenta que la habilitación puede tomar un lapso de tiempo, hoy en día es casi de forma automática, pero esto podría tomar en algunos casos entre 1 a 2 días."
  },
  {
    "objectID": "02_rgee-setup.html#confirmación-de-earth-engine",
    "href": "02_rgee-setup.html#confirmación-de-earth-engine",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.2 Confirmación de Earth Engine",
    "text": "2.2 Confirmación de Earth Engine\nCon este correo de bienvenida de Earth Engine, podemos estár al 100% seguro de tener acceso a :\n\nEarth Engine Code Editor\nEarth Engine Developer Docs\nEartg Engine Explore"
  },
  {
    "objectID": "02_rgee-setup.html#creación-de-un-proyecto-cloud",
    "href": "02_rgee-setup.html#creación-de-un-proyecto-cloud",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.3 Creación de un proyecto Cloud",
    "text": "2.3 Creación de un proyecto Cloud\nPara poder usar Google Earth Engine es necesario crear un proyecto en Google Cloud Platform (GCP), esto es relativamente fácil y requiere que inicie sesión en la consola GCS, haga clic en el menú desplegable de proyectos y haga clic en “Nuevo proyecto”. El proyecto se crea en unos segundos."
  },
  {
    "objectID": "02_rgee-setup.html#habilitación-de-la-api-de-google-earth-engine-en-su-cuenta-personal",
    "href": "02_rgee-setup.html#habilitación-de-la-api-de-google-earth-engine-en-su-cuenta-personal",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.4 Habilitación de la API de Google Earth Engine en su cuenta personal",
    "text": "2.4 Habilitación de la API de Google Earth Engine en su cuenta personal\nPara asegurarse de que su proyecto Google Cloud recién creado es compatible con GEE, deberá habilitar la API de Earth Engine. Para hacer esto, navegue a la sección API y Servicios en su cuenta de Google Cloud y haga clic en API y servicios habilitados. A partir de ahí, haga clic en “Habilitar API” y busque Earth Engine. Una vez que lo haya localizado, habilite la API, tenga en cuenta que los cambios pueden tardar unos minutos en propagarse.\n\n\n\n\n\n\n\nObservacón:\n\n\n\nLa vinculación de GMAIL hasta el correo de configuración por parte de Earth Engine, es la base fundamental para posteriormente trabajar en cualquier lenguage de programación que consume la API de Earth Engine (R, python, Js, Julia)."
  },
  {
    "objectID": "02_rgee-setup.html#configuración-de-gcloudcli",
    "href": "02_rgee-setup.html#configuración-de-gcloudcli",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.5 Configuración de GCloudCLI",
    "text": "2.5 Configuración de GCloudCLI\nPara poder vincular Google Earth Engine con R, es necesario contalar con la instalación de GCloud CLI, para instalar este software desde R solo necesitamos cargar la librería cloudml y utilizar el siguiente comando gcloud_install().\n\n# Activación o llamado de los paquetes instalados\nlibrary(cloudml)\n# Instalación de GCloud CLI\ngcloud_install()"
  },
  {
    "objectID": "02_rgee-setup.html#registro-de-crendenciales",
    "href": "02_rgee-setup.html#registro-de-crendenciales",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.6 Registro de crendenciales",
    "text": "2.6 Registro de crendenciales\n\nAntes de emplear rgee es necesario crear una carpeta raiz en el mismo editor de google earth engine."
  },
  {
    "objectID": "02_rgee-setup.html#configuración-de-rgee",
    "href": "02_rgee-setup.html#configuración-de-rgee",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.7 Configuración de rgee",
    "text": "2.7 Configuración de rgee\n\nlibrary(rgee)\nee_Initialize(user = \"barja.geografo@gmail.com\", drive = TRUE)\n\n── rgee 1.1.7 ─────────────────────────────────────── earthengine-api 0.1.369 ── \n ✔ user: barja.geografo@gmail.com \n ✔ Google Drive credentials:\n ✔ Google Drive credentials:  FOUND\n ✔ Initializing Google Earth Engine:\n ✔ Initializing Google Earth Engine:  DONE!\n\n ✔ Earth Engine account: users/labsaf \n\n ✔ Python Path: C:/Users/anton/AppData/Local/r-miniconda/envs/rgee/python.exe \n────────────────────────────────────────────────────────────────────────────────"
  },
  {
    "objectID": "02_rgee-setup.html#hola-mundo-en-rgee",
    "href": "02_rgee-setup.html#hola-mundo-en-rgee",
    "title": "2  Registro de usuario en la plataforma de Google Earth Engine",
    "section": "2.8 Hola mundo en rgee",
    "text": "2.8 Hola mundo en rgee\n\nee$String('Hola mundo espacial🌎🚀')$getInfo()\n\n[1] \"Hola mundo espacial🌎🚀\""
  },
  {
    "objectID": "03_methodology.html#definición-de-parámetros",
    "href": "03_methodology.html#definición-de-parámetros",
    "title": "3  ¿Qué es RUSLE?",
    "section": "3.1 Definición de parámetros",
    "text": "3.1 Definición de parámetros\n\n3.1.1 Factor R\nEs el factor de erosividad de escorrentía de lluvia (MJ·mm·ha−1·h−1·Año−1), índice numérico que expresa la capacidad de la lluvia para erosionar el suelo. Para su cálculo existen diferentes modelos; sin embargo para este manual se consideró usar la formula de Wischmeier y Smith (1978).\n\\begin{equation}\n    R = 1.73 \\times 10^{(1.5\\times\\log(Pm^2/Pa)-0.08188)}   \n\\end{equation}\nDonde:\n\nR es la erosividad de lluvia en (MJ en mm)/(ha^{-1} h^{-1} año^{-1}) (mega julios por milímetro por hectárea por hora por año)\nPm es la precipitación mensual\nPa es la precipitación en un año\n\n\n\n3.1.2 Factor K\nEs el factor de erodibilidad del suelo (Mg·h·MJ^{−1}·mm^{−1}), una descripción numérica de la susceptibilidad de las partículas del suelo a la erosión hídrica. Estos valores van de 0 a 1, donde 0 es menos suceptible y 1 es altamente susceptible a la erosión hídrica.\nPara su cálculo se tomo como referencia la formula de Sharpley and Williams (1983).\n\\begin{equation}\nK = f_{Csand} \\cdot f_{Cl-syo} \\cdot f_{org} \\cdot f_{hyosunnd}  \n\\end{equation}\nDonde:\n\nf_{Csand} : Factor que reduce el indicador K en suelos con una alta proporción de contenido de arena gruesa y mayor para suelos con poca arena.\n\n\nf_{Csand} = \\left(0.2 + 0.3 \\cdot e^{-0.256 \\cdot m_s \\cdot (1 + m_silt/100)}\\right)\n\n\nf_{Cl-syo}: Factores de erodibilidad bajos del suelo para suelos con una alta relación arcilla / limo.\n\n\nf_{Cl-syo} = (m_{siltmc} + m_{silt})^{0.3}\n\n\nf_{org}: Factor que reduce los valores de K en suelos con un alto contenido de carbono orgánico.\n\n\nf_{orgC} = \\left(1.0 + 0.256 \\cdot \\frac{{orgC}}{{orgC + e^{3.72 - 2.95 \\cdot orgC}}}\\right)\n\n\nf_{hyosand}: Factor que reduce el valor K de las clases de suelo con alto contenido de arena.\n\n\nf_{hyosunnd} = \\left(1.0 + 0.7 \\cdot (1 - \\frac{m_s}{100}) \\cdot (1 - \\frac{m_s}{100}) + e^{5.51 + 22.9 \\cdot (1 - \\frac{m_s}{100})}\\right)\n\n\n\n3.1.3 Factor LS\nEs el factor de longitud de pendiente (L) y el factor de inclinación (S), ambos variables combinadas expresan el efecto de la topografía local sobre la tasa dde erosión del suelo. Para su cálculo se tomo en cuenta la formula establecida por Moore (1985).\n\\begin{equation}\n    LS = (0.4 + 1) \\times (Flowacc\\times CellSize /22.13)^{0.4} \\times (\\sin(\\theta)/0.0896)^{1.3}\n\\end{equation}\nDonde:\n\nFlowacc : Acumulación de flujo\nCellSize: Tamaño de pixel\n\\theta : Mapa de pendientes en grados\n\n\n\n3.1.4 Factor C\nDetermina la eficacia relativa de los sistemas de manejo del suelo y de los cultivos en terminos de prevencion o reduccion de la perdida de suelo. Los valores oscila entre 0, para una superficie no erosible, y 1, parcela desnuda (sin vegetación). Por temas práticos muchos autores adoptan enfoques simplificados: por ejemplo, utilizar el mapas de cobertura del suelo y asignando un factor C a cada clase, o por ultima emplear los valores de NDVI y las condiciones climáticas.\nPara su cálculo se tomo como referencia la formula de Almagro et al (2019).\n\\begin{equation}\n    C = 0.1 \\times(\\frac{-NDVI + 1}{2})\n\\end{equation}\nDonde:\n\nFlowacc : Acumulación de flujo\nCellSize: Tamaño de pixel\n\\theta : Mapa de pendientes en grados\n\n\n\n3.1.5 Factor P\nRecoge la influencia que tienen las prácticas de conservación de suelos sobre las tasas de erosión, en otras palabras el factor P tiene como objetivo reducir la escorrentía del agua y, en consecuencia, la pérdida de suelo. Existen diferentes clasificaciones de pesos según el tipo de cobertura presente en el ámbito de estudio, como se observa en los trabajos de Mekonnen, E. et al. (2023) y Mashes, C. S. et al. (2023) Sin embargo; la ecuación RUSLE ejecutó un factor P igual a 1 para reflejar la erosión potencial bajo las condiciones actuales de ninguna práctica estructural de conservación de suelos. Por este mismo sustento el presente manual toma el mismo criterio."
  },
  {
    "objectID": "04_rusle_with_rgee.html#activación-de-librerías",
    "href": "04_rusle_with_rgee.html#activación-de-librerías",
    "title": "4  RUSLE con rgee",
    "section": "4.1 Activación de librerías",
    "text": "4.1 Activación de librerías\n\nlibrary(rgee)\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(nngeo)\nlibrary(mapsPERU)\nlibrary(cptcity)\nee_Initialize(user = 'barja.geografo@gmail.com')\n\n── rgee 1.1.7 ─────────────────────────────────────── earthengine-api 0.1.369 ── \n ✔ user: barja.geografo@gmail.com \n ✔ Initializing Google Earth Engine:\n ✔ Initializing Google Earth Engine:  DONE!\n\n ✔ Earth Engine account: users/labsaf \n\n ✔ Python Path: C:/Users/anton/AppData/Local/r-miniconda/envs/rgee/python.exe \n────────────────────────────────────────────────────────────────────────────────"
  },
  {
    "objectID": "04_rusle_with_rgee.html#lectura-del-ámbito-de-estudio",
    "href": "04_rusle_with_rgee.html#lectura-del-ámbito-de-estudio",
    "title": "4  RUSLE con rgee",
    "section": "4.2 Lectura del ámbito de estudio",
    "text": "4.2 Lectura del ámbito de estudio\n\npiura_ee &lt;- map_DEP |&gt;\n    filter(DEPARTAMENTO == 'Piura')  |&gt;\n    st_as_sf() |&gt;\n    sf_as_ee()\n\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\n\n\nRegistered S3 method overwritten by 'geojsonsf':\n  method        from   \n  print.geojson geojson\n\nMap$centerObject(piura_ee,zoom = 8)\n\nNOTE: Center obtained from the first element.\n\nMap$addLayer(piura_ee)"
  },
  {
    "objectID": "04_rusle_with_rgee.html#factor-r",
    "href": "04_rusle_with_rgee.html#factor-r",
    "title": "4  RUSLE con rgee",
    "section": "4.3 Factor R",
    "text": "4.3 Factor R\n\nclim_rain &lt;- ee$Image('OpenLandMap/CLM/CLM_PRECIPITATION_SM2RAIN_M/v01')\nyear &lt;- clim_rain$reduce(ee$Reducer$sum())\nr_monthly &lt;- ee$Image(10)$pow(ee$Image(1.5)$\n   multiply(clim_rain$pow(2)$\n   divide(year)$log10()$\n   subtract(-0.08188)))$\n   multiply(1.735)\nfactorR &lt;- r_monthly$reduce(ee$Reducer$sum())\n\n\nviz_factorR &lt;- list(\n    palette = cpt(pal = 'ukmo_wow_humidity'),\n    min = 1.00,\n    max = 6000\n    )\n\nMap$addLayer(factorR$clip(piura_ee),viz_factorR) + \n Map$addLegend(viz_factorR, 'Factor R')"
  },
  {
    "objectID": "04_rusle_with_rgee.html#factor-k",
    "href": "04_rusle_with_rgee.html#factor-k",
    "title": "4  RUSLE con rgee",
    "section": "4.4 Factor K",
    "text": "4.4 Factor K\n\n# Factor K\nsand &lt;- ee$Image(\"OpenLandMap/SOL/SOL_CLAY-WFRACTION_USDA-3A1A1A_M/v02\")$\n    select(\"b0\")$rename(\"sand\")\n\nsilt &lt;- ee$Image(\"users/aschwantes/SLTPPT_I\")$\n    divide(100)$rename(\"silt\")\n\nclay &lt;- ee$Image(\"OpenLandMap/SOL/SOL_SAND-WFRACTION_USDA-3A1A1A_M/v02\")$\n    select(\"b0\")$rename(\"clay\")\n\norg &lt;- ee$Image(\"OpenLandMap/SOL/SOL_ORGANIC-CARBON_USDA-6A1C_M/v02\")$\n    select(\"b0\")$rename(\"org\")\n\nsoil &lt;- ee$Image(c(clay, sand, silt, org))$clip(piura_ee)\n\n\n# Formula para calcular el factor acorde la eq. \nfcsand &lt;- soil$expression(\n  '0.2 + 0.3 * exp(-0.256 * sand * (1-(silt/100)))',\n  list(\n    'sand' = soil$select('sand'),\n    'silt' = soil$select('silt')\n  )\n)\n\n\nfcl_si &lt;- soil$expression(\n  '(silt/(clay + silt))**0.3',\n  list(\n    'silt' = soil$select('silt'),\n    'clay' = soil$select('clay')\n  )\n)\n\n\nforg &lt;- soil$expression(\n  '1 - ((0.25*org)/(org + exp(3.72-2.95*org)))',\n  list(\n    'org' = soil$select('org')\n  )\n)\n\n\nfhyosand &lt;- soil$expression(\n  '1-((0.7*(1 - sand/100))/((1 - sand/100) + exp(-5.51 + 22.9*(1 - sand/100))))',\n  list(\n    'sand' = soil$select('sand')\n  )\n)\n\n\nfactores &lt;- ee$Image(c(fcsand, fcl_si, forg, fhyosand))$rename(c(\"fcsand\", \"fcl_si\", \"forg\", \"fhyosand\"))\nfactorK &lt;- factores$expression(\n    \"fcsand * fcl_si * forg * fhyosand\",\n    list(\n        \"fcsand\" = factores$select(\"fcsand\"),\n        \"fcl_si\" = factores$select(\"fcl_si\"),\n        \"forg\" = factores$select(\"forg\"),\n        \"fhyosand\" = factores$select(\"fhyosand\")\n    )\n)\n\n\nviz_factorK &lt;- list(\n    palette = cpt(pal = \"jjg_polarity_PuOr\", n = 5),\n    min = 0.0,\n    max = 0.25\n)\n\nMap$addLayer(factorK$clip(piura_ee), viz_factorK) +\n    Map$addLegend(viz_factorK, \"Factor K\")"
  },
  {
    "objectID": "04_rusle_with_rgee.html#factor-ls",
    "href": "04_rusle_with_rgee.html#factor-ls",
    "title": "4  RUSLE con rgee",
    "section": "4.5 Factor LS",
    "text": "4.5 Factor LS\n\nflow_acc &lt;- ee$Image('WWF/HydroSHEDS/15ACC')$rename('flow_acc')\ndem &lt;- ee$Image('WWF/HydroSHEDS/03CONDEM')\nslope &lt;- ee$Terrain$slope(dem)$rename('slope')\nfactores_para_ls &lt;- ee$Image(c(flow_acc,slope))\n\n\nfactorLS &lt;- factores_para_ls$expression(\n    '(0.4+1)*(flow_acc*463.83/22.13)**0.4*(slope/0.0896)**1.3',\n    list(\n       'slope' = factores_para_ls$select('slope'),\n       'flow_acc' = factores_para_ls$select('flow_acc')\n    )\n)\n\n\nviz_factorLS &lt;- list(\n    palette = cpt(pal = 'gist_earth',n = 5),\n    min = 0.0,\n    max = 3500\n    )\n\nMap$addLayer(factorLS$clip(piura_ee),viz_factorLS) + \n Map$addLegend(viz_factorLS,'Factor LS')"
  },
  {
    "objectID": "04_rusle_with_rgee.html#factor-c",
    "href": "04_rusle_with_rgee.html#factor-c",
    "title": "4  RUSLE con rgee",
    "section": "4.6 Factor C",
    "text": "4.6 Factor C\n\nndvi_median &lt;- ee$ImageCollection('MODIS/006/MOD13A2')$\n    median()$multiply(0.0001)$select('NDVI')\nfactorC &lt;- ee$Image(0.1)$multiply(ndvi_median)$multiply(-1)$add(1)$divide(2)       \n\n\nviz_factorC &lt;- list(\n    palette = cpt(pal = 'grass_ndvi'),\n    min = 0.46,\n    max = 0.49\n    )\n\nMap$addLayer(factorC$clip(piura_ee),viz_factorC) + \n Map$addLegend(viz_factorC, 'Factor C')"
  },
  {
    "objectID": "04_rusle_with_rgee.html#mapa-de-erosion",
    "href": "04_rusle_with_rgee.html#mapa-de-erosion",
    "title": "4  RUSLE con rgee",
    "section": "4.7 Mapa de erosion",
    "text": "4.7 Mapa de erosion\n\nerosion &lt;- factorC$multiply(factorR)$multiply(factorLS)$multiply(factorK)\n\nviz_erosion &lt;- list(\n    palette = cpt(pal = \"grass_elevation\", rev = TRUE),\n    min = 0.0,\n    max = 5000\n)\n\nMap$addLayer(erosion$clip(piura_ee), viz_erosion) +\n    Map$addLegend(viz_erosion, \"Mapa de Erosion\")"
  },
  {
    "objectID": "04_rusle_with_rgee.html#exportar-raster-final",
    "href": "04_rusle_with_rgee.html#exportar-raster-final",
    "title": "4  RUSLE con rgee",
    "section": "4.8 Exportar raster final",
    "text": "4.8 Exportar raster final\n\nee_as_raster(\n    erosion,\n    piura_ee,\n    scale = 1000,\n    \"./mapa_erosion_piura.tif\"\n    )"
  }
]